<!DOCTYPE html>
<html>
  <head>
    <title>X-Window ä¸ Wayland ç®€ä»‹ä¸å¯¹æ¯”</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# X-Window ä¸ Wayland ç®€ä»‹ä¸å¯¹æ¯”

---

# ä»€ä¹ˆæ˜¯ X-Window

- å‘å¸ƒæ—¶é—´ 1984
- æœ€æ–°ç‰ˆæœ¬ 11 ï¼ˆX11ï¼‰
- Client / Server æ¶æ„
  - å¯ä»¥é€šè¿‡ TCP è®¿é—®è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ GUI åº”ç”¨
  - åœ¨æœ¬åœ°è¿è¡Œçš„ GUI åº”ç”¨å¯ä»¥ä½¿ç”¨ Unix domain socket è®¿é—®
- æ”¯æŒåè®®æ‰©å±• ğŸ‘
  - XRender
  - GLX
  - ...
- å¸¸è§å®ç°ï¼šX.Org
- å¦‚ä½•ä¼˜é›…çš„è£… X
```bash
sudo apt-get install xorg
```

---

class: center, middle

![](./images/x-example.png)

refer [wikipedia](https://en.wikipedia.org/wiki/X_Window_System)

æ³¨æ„ Client ä¸ Server çš„è§’è‰²åŒºåˆ†

---

class: center, middle

## å®Œç¾

---

class: center, middle

# 3D ?

![](./images/banzang.jpg)

---

# OpenGL

- è·¨å¹³å°
- ä¸šç•Œæ ‡å‡†

---

class: center, middle

# OpenGL on X-Window

![](./images/idri.gif)

---

# OpenGL on X-Window 

- é€šè¿‡ GLX æ‰©å±•ï¼Œå°† OpenGL æ¸²æŸ“æŒ‡ä»¤é€šè¿‡ç½‘ç»œä¼ è¾“ç»™ X Server
- X Server è°ƒç”¨ç¡¬ä»¶ç›¸å…³é©±åŠ¨ï¼Œè¿›è¡Œæ¸²æŸ“
- ç›¸æ¯” 2D å†…å®¹ï¼Œéœ€è¦ä¼ é€’å¤§é‡æ•°æ®

---

class: center, middle

![](./images/geyou.jpg)

---

class: middle, center

# DRI (Direct Rendering Infrastructure)

![](./images/dri.gif)

---

class: middle, center

# KMS!

Kernel Mode Settings

---

class: center

# Compositor!

![](./images/comp1.png)
![](./images/comp2.png)

---

class: center

# Compositor!

![](./images/expose.jpg)

---

class: center, middle

![](./images/x-architecture.png)

---

# X-Window

- Client / Server æ¶æ„å¼•å…¥äº†è¿‡å¤šå¤æ‚åº¦
  - å¯¼è‡´ 3D æ¸²æŸ“æ€§èƒ½é™ä½
  - Compositor
- éœ€è¦åšçš„å·¥ä½œè¶Šæ¥è¶Šå°‘ï¼Œè¿˜åšäº†ä¸€äº›é‡å¤å·¥ä½œ
  - KMS
  - Compositor
- è®¿é—®è¿œç¨‹æœåŠ¡å™¨å›¾å½¢ç•Œé¢çš„éœ€æ±‚é™ä½

---

class: middle, center

![è¦ä½ ä½•ç”¨](./images/no-use.jpg)

---

class: middle, center

![](./images/x11.png)

---

class: middle, center

# Wayland!

---

# å¤ç”¨ç°æœ‰ç»„ä»¶

- KMS
- DRM
- GEM
- ...

---

class: middle, center

![](./images/wayland-architecture.png)

---

# Wayland

- ä¾ç„¶æ˜¯ Client / Server æ¶æ„
  - é»˜è®¤ä¸æ”¯æŒè¿œç¨‹è®¿é—®
- Compositor ç›´æ¥ä¸ kernel / client é€šè®¯
  - Compositor å¯ä»¥ç«‹å³çŸ¥é“å“ªä¸ª client éœ€è¦æ¥æ”¶æ—¶é—´
- Client ç›´æ¥è¿›è¡Œç»˜å›¾

---

# å®ç°

- Server
  - Weston - å‚è€ƒå®ç°
  - Kwin - KDE
  - Mutter - Gnome
  - ...

- Client
  - Qt
  - Gtk+

---

class: middle, center

# XWayland

---

class: middle, center

![](./images/x-on-wayland.png)

---

class: middle, center

![](./images/linus-fuck-huangrenxun.jpg)

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
